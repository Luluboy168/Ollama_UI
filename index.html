<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Ollama èŠå¤©å®¤</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
  <div id="app" class="container">
    <!-- Auth Bar -->
    <div class="auth-bar">
      <template v-if="isLoggedIn">
        ğŸ‘¤ {{ username }}
        <button @click="logout">ç™»å‡º</button>
      </template>
      <template v-else>
        <button @click="login">ç™»å…¥</button>
        <button @click="register">è¨»å†Š</button>
      </template>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
      <h2>èŠå¤©å®¤åˆ—è¡¨</h2>
      <ul>
        <li
          v-for="session in sessions" 
          :key="session.id"
          :class="{ active: session.id === currentSessionId }"
        >
          <span @click="loadSession(session.id)" class="session-title">
            {{ session.title }}
          </span>
          <button class="edit-btn" @click.stop="editSession(session.id, session.title)">âœï¸</button>
          <button class="delete-btn" @click.stop="deleteSession(session.id)">ğŸ—‘</button>
        </li>
      </ul>
      <button @click="createSession">å»ºç«‹èŠå¤©å®¤</button>
    </div>

    <!-- Chat Area -->
    <div class="chat-area" v-if="isLoggedIn && currentSessionId">
      <div class="model-selector">
        <label for="model">æ¨¡å‹ï¼š</label>
        <select v-model="selectedModel" id="model">
          <option value="gemma3:1b">Gemma 3 (1b)</option>
          <option value="gemma3:27b">Gemma 3 (1b)</option>
          <option value="llama3.1:latest">LLaMA 3.1</option>
          <option value="deepseek-r1:32b">DeepSeek-r1 (32b)</option>
        </select>
      </div>
      <div id="chat-box">
        <div v-for="msg in messages" :key="msg.created_at" :class="['message', msg.role]">
          {{ msg.role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–' }}: {{ msg.content }}
        </div>
      </div>

      <div class="input-area">
        <input type="text" v-model="userInput" placeholder="è¼¸å…¥è¨Šæ¯..." @keyup.enter="sendMessage" />
        <button @click="sendMessage">é€å‡º</button>
      </div>
    </div>
    <div v-else-if="!isLoggedIn" class="chat-area">
      <p>è«‹å…ˆç™»å…¥ä»¥ä½¿ç”¨èŠå¤©å®¤åŠŸèƒ½ã€‚</p>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
